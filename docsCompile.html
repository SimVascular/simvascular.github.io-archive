<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>SimVascular Docs</title>

    <link href="css/bootstrap.css" rel="stylesheet" type="text/css" />

    <link href="css/shop-item.css" rel="stylesheet" type="text/css" />

    <link href="css/codestyle.css" rel="stylesheet" type="text/css" />    

    <link rel="stylesheet" href="font-awesome-4.1.0/css/font-awesome.min.css">

    <link rel="stylesheet" href="http://code.ionicframework.com/ionicons/1.5.2/css/ionicons.min.css">

    <link rel="shortcut icon" href="img/favicon.ico">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>

    <!-- Navigation -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-main-collapse">
                <i class="fa fa-bars" id="barIcon"></i>
              </button>
                <a class="navbar-brand" id="brandName" href="index.html">
                  <img src="img/svlogo/svLogoSmallText.png" alt="...">
                </a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse navbar-right navbar-main-collapse">            
                <ul class="nav navbar-nav">
                  
                  <!-- GETTING STARTED -->
                  <li>
                    <a href="#" id="dropdownMenu1" data-toggle="dropdown">
                      <b><span class="fa fa-caret-square-o-right"></span> Getting Started</b>
                    </a>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
                      <li role="presentation"><a role="menuitem" tabindex="-1" href="docsInstallation.html"><b><span class="fa fa-sign-in fa-rotate-90"></span> Installation</b></a></li>   
                      <li role="presentation" class="divider"></li>                   
                      <li role="presentation"><a role="menuitem" tabindex="-1" href="docsCompile.html"><b><span class="fa fa-file-text-o"></span> Compile Sources</b></a></li>  
                      <li role="presentation"><a role="menuitem" tabindex="-1" href="docsCodeSnippets.html"><b><span class="fa fa-indent"></span> Code Snippets</b></a></li>                                  
                      <li role="presentation" class="divider"></li>
                      <li role="presentation"><a role="menuitem" tabindex="-1" href="docsQuickGuide.html"><b><span class="icon ion-ios7-bolt"></span> Quick Guide</b></a></li>           
                      <li role="presentation" class="divider"></li>
                      <li role="presentation"><a role="menuitem" tabindex="-1" href="comingSoon.html"><b>Doxygen Docs for C++</b></a></li>  
                      <li role="presentation"><a role="menuitem" tabindex="-1" href="comingSoon.html"><b>Doxygen Docs for Tcl</b></a></li>  
                      <li role="presentation"><a role="menuitem" tabindex="-1" href="comingSoon.html"><b>Doxygen Docs for Fortran</b></a></li>           
                    </ul>
                  </li>                  

                  <!-- USER GUIDES -->
                  <li>
                    <a href="#" id="dropdownMenu1" data-toggle="dropdown">
                      <b><span class="fa fa-user"></span> User Guides</b>
                    </a>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
                      <li role="presentation"><a role="menuitem" tabindex="-1" href="docsImageGuide.html"><b><span class="icon ion-image"></span> Medical Images</b></a></li>
                      <li role="presentation"><a role="menuitem" tabindex="-1" href="docsModelGuide.html"><b><span class="icon ion-settings"></span> Modeling</b></a></li>
                      <li role="presentation" class="divider"></li>
                      <li role="presentation"><a role="menuitem" tabindex="-1" href="docsMeshing.html"><b><span class="icon ion-ios7-keypad"></span> Meshing</b></a></li>
                      <li role="presentation" class="divider"></li>
                      <li role="presentation"><a role="menuitem" tabindex="-1" href="docsFlowSolver.html"><b><span class="icon ion-play"></span> Simulation</b></a></li>
                      <li role="presentation" class="divider"></li>
                      <li role="presentation"><a role="menuitem" tabindex="-1" href="docsRefs.html"><b><span class="icon ion-document-text"></span> References</b></a></li>
                    </ul>
                  </li>

                  <!-- CLINCAL CASES -->
                  <li>
                    <a href="#" id="dropdownMenu1" data-toggle="dropdown">
                      <b><i class="fa fa-stethoscope"></i> Clinical Cases</b>
                    </a>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
                      <li role="presentation"><a role="menuitem" tabindex="-1" href="clinicalCase1.html"><b><span class="fa fa-user-md"></span> Aortofemoral Normal (Case 1)</b></a></li>                      
                      <li role="presentation"><a role="menuitem" tabindex="-1" href="clinicalCase2.html"><b><span class="fa fa-user-md"></span> Aortofemoral Normal (Case 2)</b></a></li>
                      <li role="presentation"><a role="menuitem" tabindex="-1" href="clinicalCase3.html"><b><span class="fa fa-user-md"></span> Coronary Normal (Case 3)</b></a></li>
                      <li role="presentation"><a role="menuitem" tabindex="-1" href="clinicalCase4.html"><b><span class="fa fa-user-md"></span> Healthy Pulmonary (Case 4)</b></a></li>
                    </ul>
                  </li>

                  <!-- svCOMMUNITY -->
                  <li>
                    <a href="#" id="dropdownMenu1" data-toggle="dropdown">
                      <b><i class="fa fa-users"></i> svCommunity</b>
                    </a>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
                      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://simtk.org/forums/viewforum.php?f=188"><b><span class="fa fa-users"></span> Public Forum</b></a></li>                                          
                      <li role="presentation" class="divider"></li>
                      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://simtk.org/mailman/listinfo/simvascular-news"><b><span class="fa fa-sign-in"></span> Join News Mailing List</b></a></li>                      
                      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://simtk.org/pipermail/simvascular-news/"><b><span class="fa fa-pencil-square-o"></span> News Mailing List Archive</b></a></li>
                      <li role="presentation" class="divider"></li>
                      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://simtk.org/mailman/listinfo/simvascular-users"><b><span class="fa fa-sign-in"></span> Join User Mailing List</b></a></li>                      
                      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://simvascular-users.40599.n7.nabble.com/"><b><span class="fa fa-pencil-square-o"></span> User Mailing List Archive</b></a></li>                      
                    </ul>
                  </li>

                    <!-- <li><a href="docsQuickGuide.html" id="btnQuickGuide"><b><span class="icon ion-ios7-bolt"></span> Quick Guide</b></a></li>
                    <li><a href="docsImageGuide.html" id="btnImageGuide"><b><span class="icon ion-image"></span> Medical Images</b></a></li>
                    <li><a href="docsModelGuide.html" id="btnModelGuide"><b><span class="icon ion-settings"></span> Modeling</b></a></li> 
                    
                    <li><a href="docsMeshing.html" id="btnMeshing"><b><span class="icon ion-ios7-keypad"></span> Meshing</b></a></li>
                    <li><a href="docsPresolver.html" id="btnPresolver"><b><span class="icon ion-log-in"></span> svPre</b></a></li>
                    <li><a href="docsFlowSolver.html" id="btnFlowSolver"><b><span class="icon ion-play"></span> svSolver</b></a></li>
                    <li><a href="docsRefs.html" id="btnRefs"><b><span class="icon ion-document-text"></span> References</b></a></li>
                    <li><a href="clinicalCase1.html" id="btnRefs"><b>Case Studies</b></a></li> -->
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Page Content -->
    <!--Nav Bar -->
<div class="row">
    <div class="col-xs-1 col-sm-1 hidden-md hidden-lg">
    </div>
    <!-- ONE COLUMN OF SPACE -->
    <nav class="hidden-xs hidden-sm col-md-2 col-lg-2 bs-docs-sidebar">


        <ul id="sidebar" class="nav nav-stacked fixed manSource"> <!--Nav Bar -->
<p><h3>Compile</h3></p>
<li><a href="#compileRequirements">System Requirements</a></li>
<li><a href="#reqLibWin">Required Libraries</a>
	<ul class="nav nav-stacked">
		<li><a href="#reqLibWin">Windows</a></li>
		<li><a href="#reqLibMac">Apple OS X</a></li>
		<li><a href="#reqLibLinux">Linux</a></li>
	</ul>
<li><a href="#compileBuild">Steps for Compiling</a>
<li><a href="#compileRun">Running Simvascular</a>
<li><a href="#compileITKVTK">ITK and VTK</a></ul>








        
    </nav>
    
    <!--Main Content -->
    <div class="col-xs-10 col-sm-10 col-md-9 col-lg-9" id="manualContent">

      <!-- ACTUAL CONTENT -->


        <div class="manCompile"><section id="compileRequirements" class="group"><h1>Compiling SimVascular using CMake</h1>

<p><br>
<em>This guide gives an overview of compiling SimVascular using CMake.  We also support standard MakeFiles.</em></p>

<p><br></p>

<h2>System Requirements</h2>

<table class="table table-bordered">
<thead>
<tr>
  <th>Windows</th>
  <th>Apple OS X</th>
  <th>Linux</th>
</tr>
</thead>
<tr>
  <td>Tested Configurations:
        <ul>
          <li>Windows 7 and Windows 8</li>
          <li>C++ (required) fortran (optional) compilers</li>
        </ul>
    Supported Compilers:
      <ul>
      <li>Visual Studio 2010 Service Pack 1 (for x64)</li>
      <li>Intel Visual Fortran Fortran compiler (ifort)</li>
    </ul>
  </td>
  <td>Tested Configurations:
        <ul>
          <li>Version 10.8.5 (Mountain Lion) and 10.9 (Mavericks)</li>
          <li>XCode 4.6 or 5.0 (with 4.6.3 previously installed)</li>
        </ul>
    Supported Compilers:
      <ul>
      <li>i686-apple-darwin11-gcc-4.2.1 (GCC) 4.2.1 (Apple Inc. build 5666)</li>
      <li>MacPorts with gcc (4.6.4)</li>
      <li>Clang 6.0 (experimental)</li>
    </ul>
  </td>
  <td>Tested Configurations:
        <ul>
          <li>Ubuntu 13.04 64-bit desktop (w/ patches)</li>
          <li>Intel processor</li>
          <li>C++ (required) fortran (optional) compilers</li>
        </ul>
    Supported Compilers:
      <ul>
      <li>gcc/g++/gfortran version 4.6.3 (others will most likely work too)</li>
      <li>ifort/icpc/icc intel compilers verison 13.0 (2013.1.117)</li>
    </ul>
  </td>
</tr>
</table>

<p><em>Use <code>gcc --version</code> to see which compiler you are using.</em></p>

<p><em>We currently <strong>only support MS Visual Stuidio 2010</strong>, later versions are <strong>not</strong> supported at this time. MinGW gfortran is not supported but we plan to add this functionality in future releases.</em></p>

<p><em>XCode&rsquo;s tools and libraries are required but compiling with XCode is currently <strong>unsupported.</strong></em></p>

<p><em>Clang 5.0+ is</em>  <strong>not</strong> <em>supported</em>, we are working on supporting this in the near future.</p>

<!-- #### Linux
- Ubuntu 13.04 64-bit desktop (w/ patches)
- Intel processor
- C++ (required) fortran (optional) compilers


Compilers currently supported:

- gcc/g++/gfortran version 4.6.3 (others will most likely work too)
- ifort/icpc/icc intel compilers verison 13.0 (2013.1.117)
    
#### Microsoft Windows
- Windows 7 and Windows 8
- C++ (required) fortran (optional) compilers


Compiler environments currently supported:

- Visual Studio 2010 Service Pack 1 (for x64)
- Intel Visual Fortran Fortran compiler (ifort)

*We currently __only support MS Visual Stuidio 2010__, later versions are __not__ supported at this time. MinGW gfortran is not supported but we plan to add this functionality in future releases.*

#### Apple OS X
- Version 10.8.5 (Mountain Lion) and 10.9 (Mavericks)
- XCode 4.6 or 5.0 (with 4.6.3 previously installed)

*XCode's tools and libraries are required but compiling with XCode is currently __unsupported.__*


Compilers currently supported:

- i686-apple-darwin11-gcc-4.2.1 (GCC) 4.2.1 (Apple Inc. build 5666)
- MacPorts with gcc (4.6.4)

Use `gcc version` to see which compiler you are using.
    
*Clang 5.0+ is*  **not** *supported* -->
</section>
<section id="reqLibWin" class="subgroup"><h2>Required Libraries</h2>

<h3>Windows</h3>

<p>You need to install: 
<ul>
<li>CMake, Visit <a href="http://www.cmake.org/"target="_blank"> cmake.org</a> for details</li>
<li><a href="http://www.visualstudio.com/"target="_blank"> Microsoft Visual Studio</a> (with x64 compilers)</li>
<li><a href="https://software.intel.com/en-us/fortran-compilers"target="_blank"> Intel Visual Fortran</a></li>
<li>MPICH2, available at: mpich2-1.4.1p1-win-x86-64.msi</li>
</ul></p>
</section>
<section id="reqLibMac" class="subgroup"><h3>Apple OS X</h3>

<p>To install CMake on OS X visit <a href="http://www.cmake.org/"target="blank"> cmake.org</a> for details</p>

<p>If you have Clang 6.0, you will also need to install MacPorts, which you can download at <a href="https://www.macports.org/"target="blank"> macports.org</a>
<br></p>

<p>The Xcode comman line tools need to be installed. This can done with this command:</p>
<pre class="highlight plaintext"><code>xcode-select --install
</code></pre>

<h5>The following libraries and tools should be installed using MacPorts:</h5>

<p>Build Tools:</p>
<pre class="highlight plaintext"><code>sudo port install gcc46
</code></pre>

<p>For svSolver, svPre, and svPost (Optional):</p>
<pre class="highlight plaintext"><code>sudo port install gfortran
sudo port install mpich-gcc46
</code></pre>

<p>Plugin Libraries (Optional):</p>
<pre class="highlight plaintext"><code>sudo port install glib2-devel
sudo port install pkgconfig
</code></pre>
</section>
<section id="reqLibLinux" class="subgroup"><h3>Linux</h3>

<p>You will need the following packages, available from the APT repository:</p>
<pre class="highlight plaintext"><code>sudo apt-get install cmake
sudo apt-get install cmake-curses-gui
sudo apt-get install cmake-gui
</code></pre>

<p>Build Tools (Fortran is optional):</p>
<pre class="highlight plaintext"><code>sudo apt-get install gcc-multilib build-essential g++ gfortran
</code></pre>

<p>Tcl/Tk:</p>
<pre class="highlight plaintext"><code>sudo apt-get install tcl8.5 tcl8.5-dev tcl8.5-lib tcllib
sudo apt-get install tk8.5 tk8.5-dev tk8.5-lib tklib
</code></pre>

<p>For flowsolver:</p>
<pre class="highlight plaintext"><code>sudo apt-get install libmpich2-dev
</code></pre>

<p>DICOM: </p>
<pre class="highlight plaintext"><code>sudo apt-get install dcmtk
sudo apt-get install libgdcm-tools
</code></pre>

<p>For VTK:</p>
<pre class="highlight plaintext"><code>sudo apt-get install libglu1-mesa-dev libxt-dev libgl1-mesa-dev
</code></pre>

<p>Plugin Libraries (Optional):</p>
<pre class="highlight plaintext"><code>sudo apt-get install glib2.0-dev
</code></pre>
</section>
<section id="compileBuild" class="group"><h2>Steps for compiling</h2>

<p>By default SimVascular will build using a superbuild mode that downloads and
configures many of the libraries automatically.  If you wish to perform this
step manually, turn off SimVascular_SUPERBUILD from the CMake menu.</p>

<ul>
<li><p>Open CMake and point the source directory to [simvascular source]/Code.  Then set the Build directory to any location not in your simvascular source directory. <em>In source builds are not supported at this time.</em> For example:</p>
<pre class="highlight plaintext"><code>Source: /home/[username]/SimVascular/Code
Build: /home/[username]/SimVascularBin
</code></pre></li>
</ul>

<p><strong>Note to Windows Users:</strong> <em>There is a bug in MSVC10 that causes errors if the compile paths are too long,  It is reccomended that you place your source directoy so that the path to it is short (C:/Code/SimVascular is known to work).</em></p>

<ul>
<li>Select your desired options in the GUI, hit configure. Continue to hit configure till no options change (or in curses-gui continue till the generate option apears.  Once configured, hit generate.<br></li>
</ul>

<p>Now you can compile the project using whichever generator you specificed to 
CMake (i.e. make or MSVC build all).  Alternatively, you may use CMake to call 
the command for you.</p>

<p>On Mac and Linux for example use make. Navigate to build directory in terminal and type <code>make</code></p>

<p>For Windows build in Visual Studio</p>

<p>On all systems (from the command prompt or terminal) this command is: </p>
<pre class="highlight plaintext"><code>cmake --build /path/to/build-directory --config RelWithDebInfo
</code></pre>
</section>
<section id="compileRun" class="group"><h2>Running SimVascular</h2>

<p>To run SimVascular and other executables you need to run these scripts which will set up the environmnet variables and start the executable. These scripts should be run from the top level of the build directory:</p>

<table class="table table-bordered">
<thead>
<tr>
  <th>Executable</th>
  <th>Linux/OSX Script</th>
  <th>Windows Script</th>
</tr>
</thead>
<tr>
  <td>SimVascular</td>
  <td>mysim</td>
  <td>mysim.bat</td>
</tr>
<tr>
  <td>svSolver</td>
  <td>mysolver</td>
  <td>mysolver.bat</td>
</tr>
<tr>
  <td>svAdapt</td>
  <td>myadapt</td>
  <td>myadapt.bat</td>
</tr>
<tr>
  <td>svTetAdapt</td>
  <td>mytetadapt</td>
  <td>mytetadapt.bat</td>
</tr>
<tr>
  <td>svPost</td>
  <td>mypost</td>
  <td>mypost.bat</td>
</tr>
</table>
</section>
<section id="compileITKVTK" class="group"><h2>Compiling with Local VTK/ITK Builds</h2>

<h4>VTK</h4>

<p>On some systems particular verisions of vtk\itk with the needed settings 
will not build correctly with gcc4.4 or gcc4.8. It is reccomended that 
you obtain and install gcc-4.6.  There is a helpful guide in this readme 
to get you started.</p>

<p>You may get these from source or use the SV<em>thirdparty</em>svn</p>

<p>The following settings are required when building VTK on your own:</p>

<ul>
<li>BUILD_SHARED_LIBS OFF</li>
<li>BUILD_TESTING OFF</li>
<li>VTK_Group_Tk ON</li>
<li>VTK_WRAP_TCL ON</li>
</ul>

<p><strong>Note</strong>: Different versions of VTK have slightly different CMake Variable names.</p>

<p>It is important to build VTK with static libraries, You need to wrap Tcl and Tk. </p>

<p>Lastly, Rendering Tk is also important (this may be in VTK_Group_Rendering, depending on your verison)</p>

<p>We reccomend using VTK 6.0.0.  SimVascular does not compile using VTK 6.1.0 yet.</p>

<h4>ITK (Optional)</h4>

<p>ITK will need these settings if building on your own:</p>

<ul>
<li>BUILD_SHARED_LIBS OFF</li>
<li>BUILD_TESTING OFF</li>
<li>Module_ITKVtkGlue ON</li>
<li>ITK_Review ON</li>
</ul>

<p>You also must ensure that the VTK_DIR from above. We reccomend using ITK 4.5.0</p>

<h2>Linux: Multiple Compilers</h2>

<p>Some versions of the needed software do not compile correctly using certain 
versions of gcc/g++.  We use gcc-4.6 to compile many of the external libraries.
It is easy to obtain gcc-4.6 without overwriting your current version using 
update-alternatives.  Below is an example of how to install both gcc-4.6 and 
gcc-4.8 on a ubuntu system.</p>
<pre class="highlight shell"><code>apt-get install c++-4.6 c++-4.8 

update-alternatives --remove-all gcc 
update-alternatives --remove-all g++ 

update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-4.6 10 
update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-4.8 20 

update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-4.6 10 
update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-4.8 20 

update-alternatives --install /usr/bin/cc cc /usr/bin/gcc 30 
update-alternatives --set cc /usr/bin/gcc 

update-alternatives --install /usr/bin/c++ c++ /usr/bin/g++ 30 
update-alternatives --set c++ /usr/bin/g++ 

update-alternatives --config gcc 
update-alternatives --config g++
</code></pre>

<h2>OS X: Installing MacPorts, gcc46, MPI</h2>

<p>If you get the Macports versions of GNU compilers you&rsquo;ll need the matching 
MPI installation.</p>

<p>Install macports from <a href="https://www.macports.org/"target="blank"> macports.org</a></p>
<pre class="highlight plaintext"><code>sudo port install gcc46
sudo port install mpich-gcc46
</code></pre>

<p><br>
<br>
<br>
<br></p>
</section></div>









    </div>
</div>    


    <!-- /.container -->
    <nav class="navbar navbar-default navbar-fixed-bottom">
        <div class="container-fluid text-center">
          <ul class="nav navbar-nav">
            <li><a>Copyright &copy; SV Development Team - 2014</a></li>                
          </ul>
        </div>
        <!-- /.container -->
    </nav>

    
    <script src="js/jquery-1.11.0.js" type="text/javascript"></script><script src="js/bootstrap.min.js" type="text/javascript"></script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
      });
      $('body').scrollspy({
        target: '.bs-docs-sidebar',
        offset: 40
      });
    </script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-55333921-1', 'auto');
      ga('send', 'pageview');
    </script>

    <script type="text/javascript"
      src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>

</body>

</html>
